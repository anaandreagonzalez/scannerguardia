<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Escanear QR - Guardia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: Arial; margin: 0; padding: 0; }
    .header { background:#007BFF;color:#fff;padding:8px;text-align:center;font-size:18px }
    #reader { width:100%;height:75vh; }
    .btn { width:90%;padding:15px;font-size:18px;margin:10px auto;display:block;background:#dc3545;color:#fff;border:none;border-radius:8px }
  </style>
</head>
<body>
  <div class="header">ðŸ“· EscÃ¡ner QR - Guardia</div>
  <div id="reader"></div>
  <button class="btn" onclick="window.close()">Cancelar</button>

  <script src="https://unpkg.com/html5-qrcode/minified/html5-qrcode.min.js"></script>
  <script>
    const html5QrCode = new Html5QrCode("reader");
    html5QrCode.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: { width: 250, height: 250 } },
      qrCodeMessage => {
        html5QrCode.stop().then(() => {
          window.location.href = 'https://script.google.com/macros/s/AKfycbzsyg4JHEv0r-FyGQntq939mhW3AaXnCV-cGH2j6FrfiEMtDlYJugaKoe_tzgxZSX9eMw/exec?v=datosQR&qr=' + encodeURIComponent(qrCodeMessage);
        });
      },
      errorMessage => {}
    );
  </script>
</body>
</html>
